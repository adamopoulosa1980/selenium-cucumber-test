{
    "readme": "# Selenium-Cucumber Automation Suite\n\nThis is a highly configurable, reliable, and extensible automation testing suite built with Selenium, Cucumber, and Java. It is designed to test web applications, including those interacting with external systems via Kafka events and REST APIs, while supporting complex user journeys, file uploads, and dynamic test scenarios. The suite is CI/CD-friendly and integrates seamlessly with Jenkins pipelines.\n\n## Features\n- **100% Configurable**: Define pages, elements, tests, and external interactions in properties files—no code changes required.\n- **Reliable**: Uses Awaitility for robust waits and a retry mechanism to handle transient failures.\n- **User Journey Support**: Simulates navigation through multiple pages via configurable actions.\n- **External System Integration**: Supports Kafka message production/consumption and REST API calls.\n- **File Uploads**: Upload JSON, XML, PDF, or other files to test application features.\n- **Data-Driven Testing**: Loads test data from CSV/JSON files.\n- **Conditional Logic**: Executes actions based on conditions (e.g., element visibility).\n- **Parallel Execution**: Runs tests concurrently for faster execution.\n- **Dynamic Locators**: Handles elements with parameterized locators.\n- **Logging & Reporting**: Detailed logs and failure screenshots integrated with Cucumber reports.\n- **Environment Switching**: Supports multiple environments (e.g., dev, prod) via configuration.\n- **Custom Waits**: Allows JavaScript-based wait conditions.\n- **State Persistence**: Saves and restores browser state (e.g., cookies) across steps.\n- **CI/CD Ready**: Headless mode, WebDriverManager, and JUnit reporting for Jenkins integration.\n\n## Prerequisites\n- **Java**: JDK 11 or higher (tested with JDK 21.0.4)\n- **Maven**: 3.6.0 or higher (tested with 3.9.8)\n- **Kafka**: A running Kafka cluster (for Kafka-related tests)\n- **Chrome**: Chrome browser (tested with version 134, managed via WebDriverManager 5.8.0)\n- **Node.js**: Required for the target web app (`selenium-cucumber-webapp`)\n\n## Setup\n1. **Clone the Repository**:\n   ```bash\n   git clone <repository-url>\n   cd selenium-cucumber-test\n   ```\n\n2. **Install Dependencies**:\n   ```bash\n   mvn clean install\n   ```\n\n3. **Configure Environment**:\n   - Copy `src/test/resources/config.dev.properties` to `config.<env>.properties` (e.g., `config.prod.properties`) and update settings:\n     ```properties\n     baseUrl=http://localhost:3000\n     kafka.bootstrap.servers=localhost:9092\n     webdriver.chrome.args=--headless,--disable-gpu\n     implicitWait=20\n     defaultTimeout=30\n     retryAttempts=3\n     retryDelaySeconds=2\n     report.screenshotsOnFailure=true\n     ```\n   - Set the environment via `-Denv` (default: `dev`).\n\n4. **Run the Web Application**:\n   - Navigate to the companion app:\n     ```bash\n     cd ../selenium-cucumber-webapp\n     npm install\n     npm start\n     ```\n   - Ensure it runs on `http://localhost:3000`.\n\n5. **Kafka Setup** (if applicable):\n   - Ensure a Kafka broker is running at `kafka.bootstrap.servers`.\n   - Create necessary topics (e.g., `order-created`, `order-processed`).\n\n## Project Structure\n```\nselenium-cucumber-test/\n├── src/\n│   ├── test/\n│   │   ├── java/\n│   │   │   ├── steps/         # Step definitions (GenericSteps.java)\n│   │   │   ├── utils/         # Config management (ConfigManager.java)\n│   │   │   └── runner/        # Test runner (TestRunner.java)\n│   │   └── resources/\n│   │       ├── config.dev.properties  # Environment-specific config\n│   │       ├── pages/         # Page definitions\n│   │       │   └── pages.properties\n│   │       ├── testdata/      # Test data and scenarios\n│   │       │   ├── tests.properties\n│   │       │   └── users.csv\n│   │       └── features/      # Cucumber feature files\n│   │           └── GenericTests.feature\n├── pom.xml                    # Maven configuration\n├── Jenkinsfile                # Jenkins pipeline definition\n└── README.md                  # This file\n```\n\n## Running Tests\n- **Default (dev environment)**:\n  ```bash\n  mvn test\n  ```\n- **Specific Environment**:\n  ```bash\n  mvn test -Denv=prod\n  ```\n- **Single Test**:\n  ```bash\n  mvn test -Dcucumber.filter.tags=\"@login_multi_users\" -Denv=dev\n  ```\n- **With Detailed Logging**:\n  ```bash\n  mvn test -X -e > output.log\n  ```\n\nReports are generated in `target/cucumber-reports.html`.\n\n## CI/CD Integration (Jenkins)\n1. **Pipeline Setup**:\n   - Use the provided `Jenkinsfile` for a basic pipeline.\n   - Configure Jenkins with Maven and JDK tools.\n\n2. **Run in Headless Mode**:\n   ```bash\n   mvn test -Dwebdriver.chrome.args=--headless,--disable-gpu\n   ```\n\n3. **Sample Jenkinsfile**:\n```groovy\npipeline {\n    agent any\n    tools {\n        maven 'Maven'\n        jdk 'JDK11'\n    }\n    stages {\n        stage('Checkout') {\n            steps {\n                git url: '<repository-url>', branch: 'main'\n            }\n        }\n        stage('Build') {\n            steps {\n                sh 'mvn clean install -DskipTests'\n            }\n        }\n        stage('Run Tests') {\n            steps {\n                sh 'mvn test -Denv=dev -Dbrowser=chrome -Dcucumber.options=\"--tags @smoke\" -Dwebdriver.chrome.args=--headless,--disable-gpu'\n            }\n            post {\n                always {\n                    archiveArtifacts artifacts: 'target/cucumber-reports.html', allowEmptyArchive: true\n                    publishHTML(target: [\n                        reportDir: 'target',\n                        reportFiles: 'cucumber-reports.html',\n                        reportName: 'Cucumber Report'\n                    ])\n                    junit 'target/surefire-reports/*.xml'\n                }\n            }\n        }\n    }\n}\n```\n\n## Configuration\n\n### General Config (`config.<env>.properties`)\n| Property                  | Description                              | Default            |\n|---------------------------|------------------------------------------|--------------------|\n| `baseUrl`                 | Base URL of the application             | `http://localhost:3000` |\n| `browser`                 | Browser type (e.g., `chrome`)           | `chrome`          |\n| `implicitWait`            | Implicit wait in seconds                | `20`              |\n| `defaultTimeout`          | Default wait timeout in seconds         | `30`              |\n| `retryAttempts`           | Number of retry attempts                | `3`               |\n| `retryDelaySeconds`       | Delay between retries in seconds        | `2`               |\n| `logLevel`                | Logging level (e.g., `INFO`, `DEBUG`)   | `INFO`            |\n| `report.screenshotsOnFailure` | Capture screenshots on failure      | `true`            |\n| `report.outputDir`        | Directory for reports                   | `target/test-reports` |\n| `kafka.bootstrap.servers` | Kafka broker addresses                  | `localhost:9092`  |\n| `kafka.group.id`          | Kafka consumer group ID                 | `test-group`      |\n| `rest.timeout.seconds`    | REST call timeout in seconds            | `10`              |\n| `webdriver.chrome.args`   | ChromeDriver arguments (e.g., headless) | `--headless,--disable-gpu` |\n\n### Page Definitions (`pages/pages.properties`)\n```properties\npage.login.path=/login\npage.login.elements.username.locator[0].type=id\npage.login.elements.username.locator[0].value=username\npage.login.elements.password.locator[0].type=id\npage.login.elements.password.locator[0].value=password\npage.login.elements.loginButton.locator[0].type=id\npage.login.elements.loginButton.locator[0].value=loginButton\npage.cart.path=/cart\n```\n\n### Test Scenarios (`tests.properties`)\n```properties\ntest.login_multi_users.description=Login with multiple users\ntest.login_multi_users.dataFile=testdata/users.csv\ntest.login_multi_users.resetDriverPerIteration=true\ntest.login_multi_users.startPage=login\ntest.login_multi_users.actions[0].action=navigate\ntest.login_multi_users.actions[0].targetPage=login\ntest.login_multi_users.actions[1].page=login\ntest.login_multi_users.actions[1].element=username\ntest.login_multi_users.actions[1].action=enter\ntest.login_multi_users.actions[1].value=${data.username}\ntest.login_multi_users.actions[2].page=login\ntest.login_multi_users.actions[2].element=password\ntest.login_multi_users.actions[2].action=enter\ntest.login_multi_users.actions[2].value=${data.password}\ntest.login_multi_users.actions[3].page=login\ntest.login_multi_users.actions[3].element=loginButton\ntest.login_multi_users.actions[3].action=click\ntest.login_multi_users.actions[4].action=navigate\ntest.login_multi_users.actions[4].targetPage=cart\ntest.login_multi_users.assertions[0].type=url\ntest.login_multi_users.assertions[0].value=/cart\ntest.login_multi_users.assertions[0].condition=contains\n```\n\n### Test Data (`users.csv`)\n```csv\nusername,password\nuser1@example.com,Pass123\nuser2@example.com,Pass456\n```\n\n## Supported Actions\n| Action           | Description                              | Properties                                  |\n|------------------|------------------------------------------|---------------------------------------------|\n| `enter`          | Enters text into an input                | `page`, `element`, `value`                  |\n| `click`          | Clicks an element                        | `page`, `element`                           |\n| `navigate`       | Navigates to a URL                       | `targetPage`                                |\n| `kafkaProduce`   | Sends a Kafka message                    | `kafka.topic`, `kafka.key`, `kafka.value`   |\n| `kafkaConsume`   | Consumes a Kafka message                 | `kafka.topic`, `kafka.key`, `kafka.valueContains` |\n| `restCall`       | Makes a REST API call                    | `rest.method`, `rest.url`, `rest.body`, `rest.header.*` |\n| `check`          | Conditional action                       | `condition`, `ifTrue.nextAction`, `ifFalse.nextAction` |\n| `saveState`      | Saves browser state                      | `stateKey`                                  |\n| `loadState`      | Loads saved state                        | `stateKey`                                  |\n| `uploadFile`     | Uploads a file to an input element       | `page`, `element`, `value` (file path)      |\n\n## Supported Assertions\n| Type         | Description                              | Properties              |\n|--------------|------------------------------------------|-------------------------|\n| `url`        | Checks current URL                       | `value`, `condition`    |\n| `visible`    | Checks element visibility                | `page`, `element`, `condition` |\n| `text`       | Checks element text                      | `page`, `element`, `value`, `condition` |\n\n## Example Test: Login with Multiple Users\n```properties\ntest.login_multi_users.description=Login with multiple users\ntest.login_multi_users.dataFile=testdata/users.csv\ntest.login_multi_users.resetDriverPerIteration=true\ntest.login_multi_users.startPage=login\ntest.login_multi_users.actions[0].action=navigate\ntest.login_multi_users.actions[0].targetPage=login\ntest.login_multi_users.actions[1].page=login\ntest.login_multi_users.actions[1].element=username\ntest.login_multi_users.actions[1].action=enter\ntest.login_multi_users.actions[1].value=${data.username}\ntest.login_multi_users.actions[2].page=login\ntest.login_multi_users.actions[2].element=password\ntest.login_multi_users.actions[2].action=enter\ntest.login_multi_users.actions[2].value=${data.password}\ntest.login_multi_users.actions[3].page=login\ntest.login_multi_users.actions[3].element=loginButton\ntest.login_multi_users.actions[3].action=click\ntest.login_multi_users.actions[4].action=navigate\ntest.login_multi_users.actions[4].targetPage=cart\ntest.login_multi_users.assertions[0].type=url\ntest.login_multi_users.assertions[0].value=/cart\ntest.login_multi_users.assertions[0].condition=contains\n```\n\n## Extending the Suite\n1. **Add a New Page**: Update `pages.properties`.\n2. **Add a New Test**: Define in `tests.properties`.\n3. **Add Test Data**: Use CSV/JSON files.\n\n## Troubleshooting\n- **Kafka Errors**: Verify broker and topics.\n- **File Uploads**: Ensure files exist at specified paths.\n- **CI/CD Issues**: Check ChromeDriver setup and network access.\n- **Navigation Timeouts**:\n  - Verify `http://localhost:3000` is responsive.\n  - Test without `--headless`:\n    ```bash\n    mvn test -Dwebdriver.chrome.args=--disable-gpu\n    ```\n  - Enable ChromeDriver logs:\n    ```java\n    System.setProperty(\"webdriver.chrome.logfile\", \"chromedriver.log\");\n    ```\n\n## Contributing\nSubmit pull requests or issues to enhance the suite!\n\n## Updates\n- **March 18, 2025**:\n  - Updated `login_multi_users` assertion to use `condition=contains` for robust URL checking.\n  - Enhanced `GenericSteps.java` with navigation timeout retries and detailed logging."
}